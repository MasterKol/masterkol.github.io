<!-- python3 -m http.server --cgi 8080 -->

<!DOCTYPE html>
<html>
<head>
	<title>Polynomial Solver</title>
	<script src="./Processing.js"></script>
	<link rel="stylesheet" type="text/css" href="./Polynomials.css">
	<link href="https://fonts.googleapis.com/css?family=Tajawal" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="../SelectionBar.css"/>
</head>
<body>
	<iframe src="../SelectionBar.html" style="display: none;" onload="this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()"></iframe>

	<br>
	
	<div style="display: flex; flex-direction: row; flex-wrap: wrap;">
		<div style="width: 700px; height: 700px; margin-left: 10px; margin-bottom: 30px;">
			<canvas data-processing-sources="./Polynomials.pde" style="width: 700px; float: left;" id="cnvs"></canvas>
		</div>

		<div id="inputs">
			<div style="flex: 0 1 auto">
				<label style="color: white;">Degree: <input type="number" id="input-degree" value="3" max="20" min="1" style="width: 40px"/></label>
				<br>
				<label style="color:white;"> View:
					<select id="input-view-option">
						<option>Complex Plane</option>
						<option selected>Original Function</option>
						<option>Potential Field</option>
					</select>
					<span id="view-description"></span>
				</label>
			</div>

			<div style="flex: 0 1 auto; display: flex; flex-direction: row; width: 500px;"> <!-- div for titles and buttons -->
				<div class="coeff-title">
					<h3 class="tootiptitle" style="color: white; margin-bottom: 5px; text-align: center;">Coefficients</h3>
					<label style="display: flex; justify-content: center;"><button type="button" id="input-randomize">Randomize Coefficients</button></label>
				</div>
				<div class="root-title">
					<h3 id="coeff-title" style="color: white; margin-bottom: 5px; text-align: center;">Roots</h3>
					<label style="display: flex; justify-content: center;"><button type="button" id="input-search-reset">Restart Search</button></label>
				</div>
			</div>

			<br>

			<div style="overflow-y: auto; flex: 1 1 auto; display: flex; flex-direction: row;">
				<div class="coeff-box">
					<div id="coeffs" style="color: white;"></div>
				</div>
				<div class="root-box">
					<div id="roots" style="color: white; text-align: center;"></div>
				</div>
			</div>
		</div>
	</div>

	<div id="writeup">
		<div id="usage">
			<h2 style="text-align: center;">Usage</h2>
			<p>
				<b>Controls:</b> Click and drag on the canvas to move the view, to scroll zoom in and out.
			</p>
			<p>
				<b>Degree:</b> This value changes the maximum exponent in the polynomial. Adding more terms slows the view so I've limited this value to 20.<br>
			</p>
			<p>
				<b>Coefficients:</b> These are the values that each term of the polynomial is multiplied by.<br>
			</p>
			<p>
				<b>Roots:</b> Shows the current approximation of the roots. Turns from red to green when approximation is acceptable.<br>
			</p>

			<p>
				<b>Circles:</b> The two circles in the view are the minimum and maximum values for the roots of the polynomial, determined by the coefficients.
			</p>

			<b>Views:</b>
			<ul style="margin-top: 6px;">
				<li><b>Complex Plane:</b> Shows the original complex plane in order to give context for other view types.</li>
				<li><b>Original Function:</b> Maps each point in the complex plane to its corresponding output, black/dark spots correspond to roots of the function.</li>
				<li><b>Potential Field:</b> Shows the direction that points would move if other roots had no effect. The true potential field will shift based on the current approximation of the roots.</li>
			</ul>
		</div>

		<div id="description">
			<h2 style="text-align: center;">Description</h2>
			<p>
				This program uses the Aberth method in order to approximate the roots of some polynomial. This algorithm can be described using an electrostatic analogy where the roots of the polynomial are positive charges (with their charge equal to the multiplicity of the root) and the current approximation of the roots are negative charges, attracted to the roots and repelled from each other. The reason for this is so that two potential roots don't converge to the same root (unless it has multiplicity greater than 1).
			</p>
			<p>
				This program steps the roots every 100 frames (roughly every 3 seconds depending on the frameRate) however they are animated to linearly transition between these steps over time, this is why you may see the roots suddenly change their speed and direction discontinuously.
			</p>
			<p>
				In order to get this visualization to run well in the browser I had to make quite a few optimizations. Because calculating the color of any given pixel is fairly expensive my goal was to try to minimize the number of times this is performed or spread it over several frames. When the viewport is zoomed the entire screen has to be redrawn so I spread the drawing over 16 frames to spread out the calculation. For translating the viewport only the newly revealed edges have to be drawn, the rest can just be translated over, this allowed me to make viewport translations run fairly quickly in the browser.
			</p>
		</div>

		<div id="purpose">
			<h2 style="text-align: center;">Purpose</h2>
			<p>
				My original reason for implementing this method was for finding the eigenvalues of a matrix to help me with homework (because using Wolfram Alpha felt too much like cheating). While implementing this in python I was having issues with the roots not converging so I decided to write this visualization to be able to see what was happening.
			</p>
			<p>
				Rootfinding algorithms for polynomial functions have a wide number of uses so I felt it was worth taking time to learn about this algorithm and write my own implementation.
			</p>
		</div>
	</div>

	<p style="color: white; margin-left: 20px; margin-bottom: 30px; height: 60px">
		Originally Added: October 30, 2021<br>
		Last Updated: April 13, 2022
	</p>

	<script type="text/javascript">
		function getCoeffMain(num){
			getCoeff(num);
		}
		function scrollFunction(event) { // not sure why I need a function to forward the event onwards but it works so thats what I'm doing
			return scroll(event);
		}

		document.getElementById("cnvs").addEventListener('wheel',function(event){
			if(scrollFunction(event)){
				event.preventDefault();
			}
		}, false);
	</script>

</body>
</html>